<mvc:View
    xmlns:unified="sap.ui.unified"
    controllerName="com.cy.rbm.controller.DisputeManagementDetails."
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:layout="sap.ui.layout"
    xmlns:suite="sap.suite.ui.commons"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
>
    <uxap:ObjectPageLayout
        id="ObjectPageLayoutDMD"
        showTitleInHeaderContent="true"
        showHeaderContent="true"
        showFooter="true"
    >
        <uxap:headerTitle>
            <uxap:ObjectPageDynamicHeaderTitle>
                <uxap:expandedHeading>
                    <Title
                        text="{detail>/description}"
                        wrapping="true"
                    />
                </uxap:expandedHeading>
                <uxap:snappedHeading>
                    <Title
                        text="{detail>/description}"
                        wrapping="true"
                    />
                </uxap:snappedHeading>
                <uxap:breadcrumbs>
                    <Breadcrumbs>
                        <Link
                            text="Back"
                            press="onNavBack"
                        />
                        <Link text="{detail>/disputeId}" />
                    </Breadcrumbs>
                </uxap:breadcrumbs>
                <uxap:actions>
                    <Text text="{detail>/status}" />
                </uxap:actions>
                <uxap:expandedContent>
                    <FlexBox
                        wrap="Wrap"
                        fitContainer="true"
                        alignItems="Stretch"
                    >
                        <!-- <Avatar src="{settlement>statusIcon}" backgroundColor="{path: 'settlement>statusText',formatter: '.formatAvatarColor'}"  displaySize="L" class="sapUiTinyMarginEnd" /> -->
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="Partner" />
                            <ObjectAttribute text="{detail>/disputeId}" />
                        </layout:VerticalLayout>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="Related Settlement" />
                            <ObjectAttribute
                                text="{detail>/Related Settlement}"
                            />
                        </layout:VerticalLayout>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="Raised Date" />
                            <ObjectAttribute text="{detail>/raisedDate}" />
                        </layout:VerticalLayout>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="Assigned To" />
                            <ObjectAttribute text="{detail>/assignedTo}" />
                        </layout:VerticalLayout>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="Priority" />
                            <ObjectStatus
                                text="{detail>/Priority}"
                                state="Success"
                            />
                        </layout:VerticalLayout>
                    </FlexBox>
                </uxap:expandedContent>
            </uxap:ObjectPageDynamicHeaderTitle>
        </uxap:headerTitle>

        <uxap:headerContent>
            <FlexBox>
                <GenericTile
                    frameType="OneByHalf"
                    header="Partner Claimed"
                    subheader="As per partner records"
                    class="sapUiTinyMarginBegin"
                >
                    <TileContent>
                        <NumericContent
                            value="166500"
                            scale="K"
                        />
                    </TileContent>
                </GenericTile>
                <GenericTile
                    frameType="OneByHalf"
                    header="System Calculated"
                    subheader="As per rebate engine"
                    class="sapUiTinyMarginBegin"
                >
                    <TileContent>
                        <NumericContent
                            value="15600"
                            scale="K"
                        />
                    </TileContent>
                </GenericTile>
                <GenericTile
                    frameType="OneByHalf"
                    header="Variance"
                    subheader="6.7% difference"
                    class="sapUiTinyMarginBegin"
                >
                    <TileContent>
                        <NumericContent
                            value="10500"
                            scale="K"
                        />
                    </TileContent>
                </GenericTile>
            </FlexBox>
        </uxap:headerContent>

        <uxap:sections>
            <uxap:ObjectPageSection title="Summary">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection title="Dispute Details">
                        <uxap:blocks>
                            <VBox width="100%">
                                <form:SimpleForm
                                    id="disputeDetailsForm"
                                    editable="false"
                                    layout="ColumnLayout"
                                    columnsXL="2"
                                    columnsL="2"
                                    columnsM="2"
                                >
                                    <Label text="Dispute Type" />
                                    <Text text="{detail>/disputeType}" />

                                    <Label text="Related Agreement" />
                                    <Link text="{detail>/relatedAgreement}" />

                                    <Label text="SLA Due Date" />
                                    <Text
                                        text="{detail>/SLADuedate}"
                                        class="slaDateRed"
                                    />

                                    <Label text="Fiscal Period" />
                                    <Text text="{detail>/fiscalPeriod}" />

                                    <Label text="Description" />
                                    <Text
                                        text="{detail>/description}"
                                        wrapping="true"
                                    />
                                </form:SimpleForm>
                            </VBox>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection title="">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection title="Amount Comparison">
                        <uxap:blocks>
                            <VBox width="100%">
                                <Table
                                    width="100%"
                                    items="{detail>/AmountComparison}"
                                >
                                    <columns>
                                        <Column>
                                            <Text text="Line Item" />
                                            <footer>
                                                <Text text="Total" />
                                            </footer>
                                        </Column>
                                        <Column hAlign="End">
                                            <Text text="Partner Amount" />
                                            <footer>
                                                <Text text="â‚¹1,66,500" />
                                            </footer>
                                        </Column>
                                        <Column hAlign="End">
                                            <Text text="System Amount" />
                                            <footer>
                                                <Text text="â‚¹1,56,000" />
                                            </footer>
                                        </Column>
                                        <Column hAlign="End">
                                            <Text text="Variance" />

                                            <footer>
                                                <ObjectStatus
                                                    state="Error"
                                                    text="â‚¹10,500"
                                                />
                                            </footer>
                                        </Column>
                                    </columns>

                                    <items>
                                        <ColumnListItem>
                                            <cells>
                                                <Text
                                                    text="{detail>lineItem}"
                                                />

                                                <Text
                                                    text="{detail>partnerAmount}"
                                                />

                                                <Text
                                                    text="{detail>systemAmount}"
                                                />
                                                <ObjectStatus
                                                    text="{detail>variance}"
                                                   
                                                />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </VBox>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection title="">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection title="Activity Timeline">
                        <uxap:actions>
                            <Button
                                text="+ Add Note"
                                type="Transparent"
                            />
                        </uxap:actions>
                        <uxap:blocks>
                            <VBox width="100%">
                                <suite:Timeline
                                    showHeaderBar="true"
                                    width="100%"
                                    content="{detail>/activityTimeline}"
                                >
                                    <suite:content>
                                        <suite:TimelineItem
                                            dateTime="{detail>dateTime}"
                                            title="{detail>user}"
                                            userName="{detail>title}"
                                            icon="{detail>icon}"
                                            status="{detail>status}"
                                            text="{detail>description}"
                                        />
                                    </suite:content>
                                </suite:Timeline>
                            </VBox>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection title="Attachments">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection title="Attachments">
                        <uxap:actions>
                            <unified:FileUploader
                                buttonOnly="true"
                                buttonText="+ Upload"
                                change="onuploadChange"
                            />
                        </uxap:actions>
                        <uxap:blocks>
                            <VBox width="100%">
                                <!-- Attachment List -->
                                <List
                                    items="{detail>/attachments}"
                                    class="sapUiNoMargin"
                                    showSeparators="None"
                                >
                                    <items>
                                        <CustomListItem>
                                            <HBox
                                                width="100%"
                                                alignItems="Center"
                                                justifyContent="SpaceBetween"
                                                class="sapUiSmallMargin sapUiContentPadding sapUiMediumMarginBottom sapUiBorderRadius"
                                            >
                                                <!-- Left content -->
                                                <HBox alignItems="Center">
                                                    <Avatar
                                                        displaySize="S"
                                                        class="sapUiTinyMarginEnd"
                                                    />

                                                    <VBox>
                                                        <Link
                                                            text="{detail>fileName}"
                                                            press=".onPreview"
                                                        />
                                                        <Text
                                                            text="{detail>info}"
                                                            class="sapUiTinyMarginTop sapUiTextColorSecondary"
                                                        />
                                                    </VBox>
                                                </HBox>

                                                <!-- Download -->
                                                <Button
                                                    class="sapUiMediumMarginEnd"
                                                    text="Download"
                                                    type="Transparent"
                                                    press=".onDownload"
                                                />
                                            </HBox>
                                        </CustomListItem>
                                    </items>
                                </List>
                            </VBox>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
        </uxap:sections>
        <uxap:footer>
            <Toolbar>
                <Button
                    text="ðŸ‘¤ Reassign "
                    press="onClickReassignDM"
                />
                <Button
                    text="â¬†ï¸ Escalate "
                    press="onClickEscalate"
                />
                <ToolbarSpacer />
                <Button
                    type="Negative"
                    text="Reject"
                    press="onClickRejectDM"
                />
                <Button
                    type="Accept"
                    text="Resolve"
                    icon="sap-icon://accept"
                    press="onClickResolveaDM"
                />
            </Toolbar>
        </uxap:footer>
    </uxap:ObjectPageLayout>
</mvc:View>
