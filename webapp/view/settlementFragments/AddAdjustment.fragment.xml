<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form">
    <Dialog title="Add Adjustment" contentWidth="450px" type="Message">
        <content>
            <VBox class="sapUiSmallMargin">
                <MessageStrip
                    text="Adjustments modify the final settlement amount. All adjustments require documentation and will be included in the audit trail."
                    type="Warning"
                    showIcon="true"
                    class="sapUiSmallMarginBottom" />

                <f:SimpleForm editable="true" layout="ResponsiveGridLayout">
                    <f:content>
                        <Label text="Adjustment Type" required="true" />
                        <ComboBox placeholder="Select type..." width="100%" value="{newRule>/Adjustment}">
                            <items>
                                <core:Item key="retro" text="Retroactive Rate Correction" />
                                <core:Item key="dispute" text="Dispute Resolution" />
                                <core:Item key="missing" text="Missing Transaction" />
                                <core:Item key="credit" text="Credit Note Adjustment" />
                                <core:Item key="manual" text="Manual Adjustment" />
                            </items>
                        </ComboBox>

                        <Label text="Amount" required="true"/>
                        <Input value="{newRule>/Amount}" valueLiveUpdate="true" placeholder="Enter amount" type="Number" />

                        <Label text="Direction" />
                        <SegmentedButton selectedKey="increase" width="100%">
                            <items>
                                <SegmentedButtonItem key="increase" text="Increase (+)" />
                                <SegmentedButtonItem key="decrease" text="Decrease (-)" />
                            </items>
                        </SegmentedButton>

                        <Label text="Reference Document" />
                        <Input placeholder="Upload or enter reference #" />

                        <Label text="Reason / Justification" required="true" />
                        <TextArea value="{newRule>/Reason}" valueLiveUpdate="true" rows="3" placeholder="Provide detailed reasoning..." width="100%" />
                    </f:content>
                </f:SimpleForm>
            </VBox>
        </content>
        <beginButton>
            <Button text="Submit" type="Emphasized" press="onSaveAdjustment" enabled="{= !!${newRule>/Reason} &amp;&amp; !!${newRule>/Amount} &amp;&amp; !!${newRule>/Adjustment} }" />
        </beginButton>
        <endButton>
            <Button text="Cancel" press="onCloseAdjustmentDialog" />
        </endButton>
    </Dialog>
</core:FragmentDefinition>