<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  controllerName="com.cy.rbm.controller.RebateAgreements">

  <VBox>

    <Toolbar>
      <Title text="Rebate Agreements"/>
    </Toolbar>

    <Table
      class="sapUiMediumMarginTop"
      items="{rebateModel>/agreements}"
      growing="true"
      growingScrollToLoad="true"
      mode="SingleSelectLeft"
      backgroundDesign="Solid">

      <!-- ================= HEADER TOOLBAR ================= -->
      <headerToolbar>
        <Toolbar>
          <SearchField
            width="20rem"
            placeholder="Search agreements..."
            liveChange="onSearch"/>
          <ToolbarSpacer/>
          <Button text="Create" type="Emphasized" icon="sap-icon://add" press=".onCreateAggrement" />
          <Button icon="sap-icon://excel-attachment"/>
          <Button icon="sap-icon://download"/>
        </Toolbar>
      </headerToolbar>

      <!-- ================= COLUMNS ================= -->
      <columns>
        <Column><Text text="Status"/></Column>
        <Column><Text text="Agreement #"/></Column>
        <Column><Text text="Description"/></Column>
        <Column><Text text="Partner"/></Column>
        <Column><Text text="Validity"/></Column>
        <Column hAlign="End"><Text text="Total Accrued"/></Column>
        <Column hAlign="End"><Text text="Pending"/></Column>
        <Column><Text text="Last Run"/></Column>
      </columns>

      <!-- ================= ITEMS ================= -->
      <items>
        <ColumnListItem
          type="Navigation"
          press=".onOpenRebateDetails">

          <cells>

            <!-- Status -->
            <GenericTag
              text="{rebateModel>status}"
              status="{rebateModel>statusState}"
              design="StatusIconHidden"/>

            <!-- Agreement -->
            <VBox>
              <Link text="{rebateModel>agreementNo}"/>
              <Label text="{rebateModel>currency}"/>
            </VBox>

            <!-- Description -->
            <Text text="{rebateModel>description}" wrapping="true"/>

            <!-- Partner -->
            <Text text="{rebateModel>partner}"/>

            <!-- Validity -->
            <Text
              text="{= ${rebateModel>validFrom} + ' - ' + ${rebateModel>validTo} }"/>

            <!-- Total Accrued -->
            <ObjectNumber
              number="{rebateModel>totalAccrued}"
              unit="₹"/>

            <!-- Pending Settlement -->
            <ObjectNumber
              number="{rebateModel>pendingSettlement}"
              unit="₹"
              state="Warning"/>

            <!-- Last Run -->
            <Text
              text="{= ${rebateModel>lastRun} ? ${rebateModel>lastRun} : '-' }"/>

          </cells>
        </ColumnListItem>
      </items>

    </Table>

  </VBox>
</mvc:View>
